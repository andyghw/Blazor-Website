@page "/"
@inject HttpClient Http

@if (movies.Count == 0)
{
    <p><em>Loading...</em></p>
}
else
{
    <div class="position-relative overflow-hidden p-3 p-md-5 m-md-3 text-center bg-light topPart" style="background-image: url(https://cdn-image.departures.com/sites/default/files/styles/responsive_vertical_964x543/public/1518635768/watch-altered-carbon-netflix-FEBWATCHLIST0218.jpg?itok=Kq1HA6ov&timestamp=1518636029)">
        <div class="col-md-5 p-lg-5 mx-auto my-5">
            <h1 class="display-4 font-weight-normal">Fresh Tomatoes</h1>
            <p class="lead font-weight-normal">
                This website is made by using WebAssebly(Blazor), ASP.NET Core and combination a set of third APIs. You can search
                movie infromation and leave your comments through this website.
            </p>
            <a class="btn btn-outline-secondary" href="https://webassembly.org/">Learn more about WebAssebly</a>
        </div>
    </div>

    <div class="d-md-flex flex-md-equal w-100 my-md-3 pl-md-3">
        <div class="bg-dark mr-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center text-white overflow-hidden">
            <div class="my-3 py-3">
                <h2 class="display-5"><a href="/movie/@movies[0].Title">@movies[0].Title</a></h2>
                <p class="lead">IMDB Rating: @movies[0].imdbRating</p>
                <img src="@movies[0].Poster" width="300" height="444">
            </div>
        </div>
        <div class="bg-light mr-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden">
            <div class="my-3 p-3">
                <h2 class="display-5"><a href="/movie/@movies[1].Title">@movies[1].Title</a></h2>
                <p class="lead">IMDB Rating: @movies[1].imdbRating</p>
                <img src="@movies[1].Poster" width="300" height="444">
            </div>
        </div>
    </div>

    <div class="d-md-flex flex-md-equal w-100 my-md-3 pl-md-3">
        <div class="bg-light mr-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center overflow-hidden">
            <div class="my-3 p-3">
                <h2 class="display-5"><a href="/movie/@movies[2].Title">@movies[2].Title</a></h2>
                <p class="lead">IMDB Rating: @movies[2].imdbRating</p>
                <img src="@movies[2].Poster" width="300" height="444">
            </div>
        </div>
        <div class="bg-primary mr-md-3 pt-3 px-3 pt-md-5 px-md-5 text-center text-white overflow-hidden">
            <div class="my-3 py-3">
                <h2 class="display-5"><a href="/movie/@movies[3].Title"  style="color:white">@movies[3].Title</a></h2>
                <p class="lead">IMDB Rating: @movies[3].imdbRating</p>
                <img src="@movies[3].Poster" width="300" height="444">
            </div>
        </div>
    </div>
}

@functions{
    List<Movie> movies;

    protected override async Task OnInitAsync()
    {
        movies = new List<Movie>();
        movies.Add(await Http.GetJsonAsync<Movie>("http://www.omdbapi.com/?t=Avengers&apikey=1342bb"));
        movies.Add(await Http.GetJsonAsync<Movie>("http://www.omdbapi.com/?t=Friends&apikey=1342bb"));
        movies.Add(await Http.GetJsonAsync<Movie>("http://www.omdbapi.com/?t=Venom&apikey=1342bb"));
        movies.Add(await Http.GetJsonAsync<Movie>("http://www.omdbapi.com/?t=Star%20wars&apikey=1342bb"));
    }
}